### 泛型
#### 定义泛型类
```java
package generic;

public class Pair<T> {
    private T first, second;
    public Pair(T first, T second){
        this.first = first;
        this.second = second;
    }

    public T getFirst(){ return first; }
    public T getSecond(){ return second; }

    public void setFirst(T first) {
        this.first = first;
    }

    public void setSecond(T second){
        this.second = second;
    }
}

//使用
package generic;

public class PairTest {
    public static void main(String[] args) {
        Pair<String> p = new Pair<String>("hello", "world");
        System.out.println(p.getFirst());
        System.out.println(p.getSecond());
    }
}
```
#### 泛型方法
```java
package generic;

public class GenericMethod {
    public GenericMethod(){}
    public  <T> void getMiddle(T[] a){
        System.out.println(a[a.length/2]);
    }
    public <T> T getLast(T[] a){
        return a[a.length-1];
    }

    public static void main(String[] args) {
        GenericMethod g = new GenericMethod();
        String[] words= {"he", "learn", "java", "and", "python"};
        System.out.println(g.<String>getLast(words)); //有足够信息让编译器推断类型是String
        g.getMiddle(words);
    }
}
```
#### 限定泛型的范围
```java
package generic;

public class ArrayAlg {
    /**
     *限定只有能够comparable的类型才可以传入，
	 如果多个限定用& 连接 <T extends Comparable & Serializable>
     */
    public static <T extends Comparable> T min(T[] a){
        if(a == null || a.length ==0){ return null; }
        T smaillest = a[0];
        for(int i=1;i<a.length;i++){
            if(smaillest.compareTo(a[i]) > 0) smaillest = a[i]
        }
        return smaillest;
    }
}
```
#### 泛型的约束
- 不能用基本类型实例化泛型类, ```Pair<Double>``` <del>```Pair<double>```</del>    
- 运行时类型查询只适用于原始类型
```java
if (a instanceof Pair<String>) // same as a instanceof Pair
```
- 不能抛出也不能捕获泛型实例 
- 参数化类型数组不合法 ```Pair<String>[] table = new Pair<String>[10]; //ERROR```
- 不能实例化类型变量 new T(...), new T[...] 或 T.class非法。
- 泛型类的静态上下文中类型变量无效
```java
//不能这么用
class Singleton<T>{
    private static T singleInstance; //ERROR
    public static T getSingleInstance() //ERROR
    {
        if(singleInstance == null){
            return singleInstance;
        }
    }
}
```
- 要注意类型擦除后大冲突 P537
